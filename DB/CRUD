const sql = require('./db');
var path = require('path');

const createNewDoggySitter = (req, res) => {
  console.log(req.body);
  const newDoggySitter = {
  
    "email": req.body.email_sitter,
    "fullName": req.body.full_name_sitter,
    "phoneNumber": req.body.phone_number_sitter,
    "password": req.body.password_sitter,
    "area": req.body.area,
    "description": req.body.details_sitter,
    "picture": req.body.sitter_pic,
    "averageRating": null, 
    "numberOfRatings": null
  };
  console.log(newDoggySitter);
  var query = "INSERT INTO DoggySitters SET ?";
  sql.query(query, newDoggySitter, (err, response) => {
    if (err) {
      console.log("error ", err);
      return;
    }
    console.log('DoggySitter created successfully');
    res.send('DoggySitter created successfully');
  });
}

const createNewDog = (req, res) => {
  console.log(req.body);
  const newDog = {
  
    "dogName": req.body.dog_name,
    "dogAge": req.body.dog_age,
    "dogSize": req.body.dog_size,
    "dogNotes": req.body.dog_notes,
    "dogPicture": req.body.dog_pic,
   /* "ownerId": req.body.details_sitter,
    "owner": req.body.sitter_pic,*/

  };
  console.log(newDog);
  var query = "INSERT INTO Dogs SET ?";
  sql.query(query, newDog, (err, response) => {
    if (err) {
      console.log("error ", err);
      return;
    }
    console.log('Dog created successfully');
    res.send('Dog created successfully');
  });
}

const createNewDogOwner = (req, res) => {
  console.log(req.body);
  const newDogOwner = {
  
    "email": req.body.email,
    "fullName": req.body.full_name,
    "phoneNumber": req.body.phone_number,
    "password": req.body.password_owner,
    "address": req.body.address,
   
  };
  console.log(newDogOwner);
  var query = "INSERT INTO DogOwners SET ?";
  sql.query(query, newDogOwner, (err, response) => {
    if (err) {
      console.log("error ", err);
      return;
    }
    console.log('DogOwner created successfully');
    res.send('DogOwner created successfully');
  });
}



module.exports = { createNewDoggySitter,
                    createNewDog,
                    createNewDogOwner
                };
